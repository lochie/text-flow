import styles from "./styles.module.scss";

import { useEffect, useState } from "react";

import { Footer } from "../footer";
import { Button } from "../button";
import { CodeBlock } from "../codeblock";
import TextFlow from "text-flow";

const ReactLogo = () => (
  <svg
    width="21"
    height="19"
    viewBox="0 0 21 19"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
  >
    <path
      d="M12.25 9.1805C12.25 8.05821 11.4666 7.14828 10.5 7.14828C9.53358 7.14828 8.75 8.05821 8.75 9.1805C8.75 10.3029 9.53358 11.2128 10.5 11.2128C11.4666 11.2128 12.25 10.3029 12.25 9.1805Z"
      fill="#53C1DE"
    />
    <path
      fillRule="evenodd"
      clipRule="evenodd"
      d="M16.5903 5.82543C16.9863 4.28233 17.484 1.42081 15.7293 0.450667C13.9827 -0.515247 11.7099 1.33562 10.5097 2.4466C9.31308 1.34669 6.97641 -0.496264 5.22314 0.476961C3.47726 1.44612 4.01565 4.26019 4.42043 5.81296C2.79182 6.25653 0 7.21191 0 9.16387C0 11.1103 2.78891 12.1497 4.40789 12.5929C4.00161 14.1542 3.49017 16.9281 5.23829 17.8951C6.99811 18.8682 9.3275 17.0691 10.5388 15.9459C11.7466 17.0634 13.9976 18.8743 15.7445 17.9046C17.4969 16.9318 17.0405 14.1087 16.6357 12.5469C18.2051 12.1028 21 11.086 21 9.16387C21 7.23067 18.1932 6.26753 16.5903 5.82543ZM16.3913 11.7192C16.1256 10.9124 15.7668 10.0545 15.328 9.16816C15.7469 8.30278 16.0917 7.45588 16.35 6.65426C17.5251 6.98096 20.1029 7.72761 20.1029 9.16387C20.1029 10.6136 17.6292 11.3673 16.3913 11.7192ZM15.295 17.1601C13.9916 17.8836 12.0555 16.1518 11.1635 15.3289C11.7552 14.7082 12.3466 13.9867 12.9237 13.1855C13.939 13.0992 14.8981 12.9579 15.7679 12.7651C16.0528 13.8698 16.6041 16.4334 15.295 17.1601ZM5.68653 17.1498C4.383 16.429 4.97881 13.9537 5.2777 12.8036C6.13784 12.9861 7.09002 13.1174 8.10768 13.1965C8.68861 13.9805 9.29712 14.7011 9.91032 15.3322C9.15271 16.035 6.99615 17.8739 5.68653 17.1498ZM0.897043 9.16387C0.897043 7.70871 3.45945 6.96746 4.66133 6.64159C4.92416 7.46121 5.26886 8.31822 5.68486 9.18485C5.26348 10.0644 4.91384 10.9349 4.64859 11.7642C3.50258 11.4497 0.897043 10.6199 0.897043 9.16387ZM5.67259 1.22147C6.98145 0.494975 9.01229 2.26428 9.88113 3.06065C9.27108 3.68885 8.66817 4.40405 8.09221 5.18352C7.10458 5.2713 6.15912 5.41226 5.28996 5.60112C4.96387 4.34874 4.36514 1.94718 5.67259 1.22147ZM13.5655 6.11855C14.2355 6.19962 14.8775 6.30748 15.4803 6.43943C15.2993 6.99563 15.0738 7.57724 14.8081 8.17346C14.4231 7.47284 14.0097 6.78628 13.5655 6.11855ZM10.51 3.6754C10.9238 4.10523 11.3382 4.58523 11.7459 5.10598C10.919 5.06846 10.0907 5.06832 9.2638 5.10543C9.67183 4.5895 10.0898 4.11022 10.51 3.6754ZM6.19955 8.17283C5.9383 7.5787 5.71479 6.99453 5.53225 6.43036C6.13143 6.3018 6.7704 6.19671 7.4361 6.11696C6.99062 6.78323 6.57797 7.46952 6.19955 8.17283ZM7.45521 12.2722C6.76753 12.1986 6.11888 12.0988 5.51989 11.9738C5.70531 11.3997 5.93375 10.803 6.20057 10.196C6.5842 10.9067 7.00315 11.5996 7.45521 12.2722ZM10.5349 14.7131C10.1097 14.2732 9.68555 13.7865 9.27136 13.2632C10.103 13.2945 10.9362 13.2945 11.7677 13.2589C11.3588 13.7919 10.9458 14.2792 10.5349 14.7131ZM14.8167 10.1652C15.0974 10.7787 15.334 11.3722 15.5219 11.9366C14.913 12.0698 14.2556 12.1771 13.563 12.2568C14.0105 11.5764 14.4304 10.8792 14.8167 10.1652ZM12.4231 12.3611C11.1511 12.4482 9.87112 12.4473 8.59866 12.3682C7.87563 11.3554 7.23198 10.2903 6.67639 9.18457C7.22932 8.0811 7.86828 7.01806 8.58788 6.00688C9.86125 5.9146 11.1425 5.91432 12.4158 6.00743C13.1293 7.01855 13.7673 8.07882 14.333 9.17232C13.774 10.2752 13.1316 11.3404 12.4231 12.3611ZM15.2812 1.19589C16.5904 1.92001 16.0077 4.49174 15.7216 5.61005C14.8504 5.41724 13.9043 5.27379 12.9138 5.18463C12.3367 4.39674 11.7389 3.6803 11.1387 3.0602C12.0186 2.24669 13.9847 0.478865 15.2812 1.19589Z"
      fill="#53C1DE"
    />
  </svg>
);

// a bunch of words that
const texts = [
  "Animate Text Easily",
  "Animate Text Seamlessly",
  "Animate Text Effortlessly",
  "Animate Text Fluidly",
];
const pkgCmds = ["npm i text-flow", "pnpm i text-flow", "yarn add text-flow"];

export default function Home() {
  const [textIndex, setTextIndex] = useState(0);
  const [cmdIndex, setCmdIndex] = useState(0);

  useEffect(() => {
    const interval = setTimeout(() => {
      setTextIndex((textIndex) => textIndex + 1);
    }, 1000);
    return () => clearTimeout(interval);
  }, []);

  return (
    <div className={styles.page}>
      <div className={styles.header}>
        <h1>
          <span>
            <strong>Text Flow</strong> for
          </span>{" "}
          <ReactLogo /> <strong>React</strong>
        </h1>
        <p>An animated text component.</p>
      </div>

      <div className={styles.demo}>
        <TextFlow>{texts[textIndex % texts.length]}</TextFlow>
      </div>

      <div className={styles.install}>
        <button onClick={() => setCmdIndex((i) => i - 1)}>&larr;</button>
        <p>
          <code>
            <TextFlow>{pkgCmds[cmdIndex % pkgCmds.length]}</TextFlow>
          </code>
        </p>
        <button onClick={() => setCmdIndex((i) => i + 1)}>&rarr;</button>
      </div>

      <Button
        onClick={() => setTextIndex((i) => i + 1)}
        style={{ marginBottom: 20 }}
      >
        Shuffle
      </Button>
      <Footer />
    </div>
  );
}

const Example = ({ code }: { code: string }) => {
  return <CodeBlock raw={code}>{code}</CodeBlock>;
};
